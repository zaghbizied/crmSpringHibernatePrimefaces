<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">
<ui:composition template="/layouts/default.xhtml">
    <ui:define name="title">Caisse</ui:define>
    <ui:param name="menu" value="AdminMenu"/>

    <ui:define name="body">
        <div class="col-sm-10">
            <h2>Caisse</h2>
            <h:form id="form">
                <p:panelGrid style="margin-top:20px" id="bilanCaisse">  
                    <f:facet name="header">  
                        <p:row>  
                            <p:column colspan="2">Bilan Caisse</p:column>  
                        </p:row>  
                        <p:row>  
                            <p:column>Type Transaction</p:column>  
                            <p:column>Montant</p:column>  
                        </p:row>  
                    </f:facet>  
                    <p:row>  
                        <p:column style="font-weight: bold;">Montant initial</p:column>  
                        <p:column>#{caisseController.montantInitial}</p:column>  
                    </p:row>
                    <p:row>  
                        <p:column style="font-weight: bold;">Paiements Fournisseurs</p:column>  
                        <p:column>
                            <p:dataList value="#{caisseController.pfByType}" var="typeF" type="definition">
                                #{typeF.type.type} : #{typeF.montant}
                            </p:dataList>
                        </p:column>  
                    </p:row>
                    <p:row>  
                        <p:column style="font-weight: bold;">Paiements Clients</p:column>  
                        <p:column>
                            <p:dataList value="#{caisseController.pcByType}" var="typeC" type="definition">
                                #{typeC.type.type} : #{typeC.montant}
                            </p:dataList>
                        </p:column>  
                    </p:row>
                    <p:row>  
                        <p:column style="font-weight: bold;">Prélèvements Caisse</p:column>  
                        <p:column>#{caisseController.prelevementsCaisse}</p:column>  
                    </p:row>  
                    <f:facet name="footer">  
                        <p:row>  
                            <p:column style="text-align: right">  
                                Montant Caisse 
                            </p:column>  
                            <p:column  colspan="3" rowspan="3">  
                                #{caisseController.montantCaisse}
                            </p:column>  
                        </p:row>  
                    </f:facet>  
                </p:panelGrid>
                <p:panelGrid columns="2">  
                    <f:facet name="header">  
                        Cloture de caisse
                    </f:facet>  
                    <h:outputLabel for="prelevement" value="Montant à prendre *" />  
                    <p:inputText id="prelevement" value="#{caisseController.prelevement}">  
                        <p:ajax listener="#{caisseController.prelevementChanged}" update="reste" />
                    </p:inputText>
                    <h:outputLabel for="reste" value="Reste" />  
                    <p:inputText id="reste" value="#{caisseController.reste}"/>  
                    <f:facet name="footer">  
                        <p:commandButton value="Cloturer" icon="ui-icon-check" style="margin:0" action="#{caisseController.cloturer}"/>  
                    </f:facet>  
                </p:panelGrid>
            </h:form>
        </div>
    </ui:define>
    
</ui:composition>
</html>